
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>UpNote</title>
    <script type="text/javascript" charset="utf-8" src="~/utf8-asp/ueditor.config.js"></script>
    <script type="text/javascript" charset="utf-8" src="~/utf8-asp/ueditor.all.min.js"></script>
    <!--建议手动加在语言，避免在ie下有时因为加载语言失败导致编辑器加载失败-->
    <!--这里加载的语言文件会覆盖你在配置项目里添加的语言类型，比如你在配置项目里配置的是英文，这里加载的中文，那最后就是中文-->
    <script type="text/javascript" charset="utf-8" src="~/utf8-asp/lang/zh-cn/zh-cn.js"></script>
    <script src="~/Scripts/xuimi.js"></script>
    <link href="~/Content/xiumi.css" rel="stylesheet" />
    <style>
        .content {
            background-color: antiquewhite;
            overflow-y: scroll;
        }
        #editor {
            width: 800px;
            height:500px;
            margin: 0 auto;
           
        }
        .file-box {
            position: relative;
            display: inline-block;
        }
        .file-box img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            position: absolute;
            top: -30px;
            left: 0;
            display: inline-block;
            border: none;
        }
        .file-box .txt,.file-box .file {
            width: 70px;
            height: 36px;
            position: absolute;
            top: -20px;
            left: 100px;
            text-align: center;
        }
    </style>
</head>
<body>
    @*<div class="content">
        <div>
            <h1>完整demo</h1>
            
            <input name="title" />标题
            <script id="editor" type="text/plain">
            </script>
        </div>
    </div>*@
   
    @using (Html.BeginForm("UpNote", "YiChuShow", FormMethod.Post, new { @class = "PostSendForm", enctype = "multipart/form-data" }))
    {
        @Html.AntiForgeryToken()
        <input name="title" value="标题"/>
        <div id="containner">
            <input type="file" id="imgFile" name="imgfile" onchange="previewFile()"><br>
            <img src="" height="200" alt="Image preview...">
        </div>
        <script id="container" name="content" type="text/plain">
        </script>
        <input type="submit" value="提交" />
    }
    <script type="text/javascript">
     var editor = UE.getEditor('container');
    function previewFile() {
        var preview = document.querySelector('img')
        var fileDom = document.querySelector('input[type=file]')
        // 获取得到file 对象
        var file = fileDom.files[0]
        // 限制上传图片的大小
        if (file.size > 1024 * 1024 * 2) {
            alert('图片大小不能超过 2MB!');
            return false;
        }
        // 创建url
        var imgUrl = window.URL.createObjectURL(file)
        preview.setAttribute("src", imgUrl)
        // 更改img url 以后释放 url
        preview.onload = function () {
            // console.log('图片加载成功')
            URL.revokeObjectURL(imgUrl)
        }
    }
    </script>
</body>
</html>
